# 技术假设

## 代码仓库结构：Monorepo

选择单一代码仓库包含Chrome扩展代码和可选的云端备份API。这种结构便于个人项目管理，确保版本同步，简化部署流程。代码组织采用功能模块分离：核心AI搜索逻辑、UI组件、浏览器API集成和数据存储层。

## 服务架构

**本地优先混合架构**：90%功能在浏览器本地完成，包括数据存储、AI推理和搜索处理。可选的轻量级云端服务仅用于数据备份和跨设备同步（后期功能）。这种架构确保核心功能的离线可用性，同时为未来扩展保留灵活性。

核心架构决策理由：隐私保护、响应速度、离线可用性是目标用户的核心关切，本地优先架构直接解决这些需求。

## 测试需求

**Unit + Integration测试策略**：建立完整的测试金字塔，包括单元测试（AI算法、搜索逻辑）、集成测试（浏览器API交互）和端到端测试（用户工作流）。重点测试搜索准确性和性能基准，建立自动化的搜索质量回归测试。

考虑到个人项目资源限制，优先建立关键路径的自动化测试，确保核心搜索功能的稳定性。

## 附加技术假设和要求

**前端技术栈决策：**
- **核心语言**：TypeScript（开发阶段）编译为Vanilla JavaScript（生产环境）
- **理由**：避免框架体积影响扩展性能，TypeScript提供开发期类型安全
- **构建工具**：Webpack 5 + Babel，支持热重载和代码分割
- **样式方案**：CSS3 + CSS Grid/Flexbox，无外部样式框架依赖

**AI技术选型和假设：**
- **文本处理引擎**：TensorFlow.js + Universal Sentence Encoder轻量版（<10MB模型大小）
- **向量搜索算法**：余弦相似度计算，本地实现避免外部依赖
- **性能假设**：现代浏览器（Chrome 88+）能够在2秒内完成100个书签的语义搜索
- **准确性目标**：MVP阶段达到80%搜索成功率，通过用户反馈持续优化至85%

**数据存储和管理：**
- **主存储**：浏览器IndexedDB，支持离线访问和大容量存储（>250MB）
- **数据结构**：JSON文档存储，包含URL、标题、内容摘要、语义向量、时间戳
- **备份策略**：本地导出功能，用户可手动备份为JSON文件

**浏览器API集成要求：**
- **权限最小化**：仅请求activeTab、bookmarks、storage权限
- **Manifest V3合规**：完全兼容最新Chrome扩展规范，支持Service Worker
- **跨浏览器考量**：代码设计考虑未来Firefox和Safari适配，但MVP专注Chrome

**性能和扩展性假设：**
- **内存使用**：扩展运行时内存占用<50MB，AI模型加载<20MB
- **搜索性能**：支持最多1000个书签的实时搜索，响应时间<2秒
- **扩展性设计**：模块化架构支持未来添加云端同步和团队协作功能
