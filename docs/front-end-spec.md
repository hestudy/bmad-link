# BMad Link UI/UX 规格说明

## 简介

这份文档定义了BMad Link（AI智能书签管理应用）用户界面的用户体验目标、信息架构、用户流程和视觉设计规范。它作为视觉设计和前端开发的基础，确保为开发者用户提供统一且以用户为中心的体验。

BMad Link专注于通过AI语义搜索解决开发者的书签管理痛点，核心设计理念是"搜索优先"的极简界面，让用户能够像使用Google搜索一样自然地查找技术资源。

### 变更日志

| 日期 | 版本 | 描述 | 作者 |
|------|------|------|------|
| 2025-09-04 | v1.0 | 基于PRD创建完整的UI/UX规格说明 | Sally (UX Expert) |

## 总体UX目标与原则

### 目标用户画像

**技术专家用户：** 
- 日常需要管理大量技术文档、API参考、开源项目的专业开发者
- 熟悉命令行和快捷键操作，偏好高效的工作流程
- 重视隐私和本地数据控制，对云端服务持谨慎态度

**效率导向用户：**
- 经常在多个项目间切换，需要快速找到相关技术资源
- 时间宝贵，不愿花费精力在手动分类和维护上
- 期望工具能"读懂"他们的需求，提供智能化体验

### 可用性目标

1. **学习易用性：** 新用户在2分钟内掌握核心搜索功能，无需阅读说明
2. **操作效率：** 熟练用户通过3次点击或快捷键完成任何操作
3. **错误预防：** 重要操作（删除书签）提供明确确认，避免误操作
4. **记忆性：** 不常用用户重新使用时能立即回忆起操作方式

### 设计原则

1. **简洁胜过巧妙** - 优先清晰的信息传达，避免过度的视觉创新
2. **渐进式披露** - 仅在需要时显示功能，保持界面整洁
3. **一致性模式** - 在整个应用中使用熟悉的UI模式
4. **即时反馈** - 每个用户操作都有清晰的即时响应
5. **默认无障碍** - 从设计阶段就考虑所有用户的可访问性需求

## 信息架构 (IA)

### 站点地图/界面清单

```mermaid
graph TD
    A[扩展弹窗主界面] --> B[搜索界面]
    A --> C[书签列表界面]
    A --> D[设置面板]
    
    B --> B1[实时搜索建议]
    B --> B2[搜索结果展示]
    B --> B3[AI搜索状态指示]
    
    C --> C1[全部书签视图]
    C --> C2[书签详情卡片]
    C --> C3[批量管理操作]
    
    D --> D1[AI功能设置]
    D --> D2[界面偏好设置]
    D --> D3[数据管理]
    
    B2 --> E[书签快速操作]
    C2 --> E
    E --> E1[访问原链接]
    E --> E2[编辑标签]
    E --> E3[删除确认]
    
    F[右键菜单] --> F1[收藏当前页面]
    F --> F2[搜索相关书签]
```

### 导航结构

**主要导航：** 
- 扩展采用Tab式导航，三个核心功能区：搜索（默认）、浏览、设置
- 搜索界面作为默认入口，体现"搜索优先"理念
- 快捷键支持：Ctrl+K激活搜索，Ctrl+B切换到浏览模式

**次级导航：**
- 搜索结果内的筛选器（按类型、时间、相似度）
- 书签列表的排序选项（时间、标题、访问频率）
- 设置面板的分类标签页（功能、外观、数据）

**面包屑策略：**
- 由于扩展界面层级较浅，主要依靠Tab状态和界面标题指示位置
- 在书签详情卡片中显示"返回搜索结果"或"返回列表"的导航路径
- 搜索状态保持，用户可快速返回之前的搜索结果

## 用户流程

### 智能书签收藏流程

**用户目标：** 快速保存当前浏览的技术资源，无需手动分类

**入口点：** 
- 浏览器工具栏扩展图标点击
- 右键菜单"收藏到智能书签"
- 快捷键 Ctrl+Shift+B

**成功标准：** 页面内容被成功抓取、分析并存储，用户收到明确的成功反馈

#### 流程图

```mermaid
graph TD
    A[用户在技术网站浏览] --> B{选择收藏方式}
    B -->|点击扩展图标| C[打开扩展弹窗]
    B -->|右键菜单| D[直接收藏]
    B -->|快捷键| D
    
    C --> E[显示收藏按钮]
    E --> F[点击收藏]
    
    D --> G[抓取页面内容]
    F --> G
    
    G --> H[AI内容分析]
    H --> I[生成语义向量]
    I --> J[存储到IndexedDB]
    
    J --> K{收藏成功?}
    K -->|是| L[显示成功提示]
    K -->|否| M[显示错误信息]
    
    L --> N[更新书签计数]
    M --> O[提供重试选项]
    
    N --> P[流程结束]
    O --> P
```

#### 边缘情况和错误处理：
- **重复收藏：** 检测已存在URL，显示"已收藏"状态并提供更新选项
- **网络连接问题：** 缓存收藏请求，连接恢复后自动处理
- **AI处理失败：** 降级为基础文本存储，保证基本收藏功能可用
- **权限被拒绝：** 引导用户检查扩展权限设置

### AI语义搜索流程

**用户目标：** 通过自然语言查询快速找到相关的技术书签

**入口点：**
- 打开扩展后默认焦点在搜索框
- 快捷键 Ctrl+K 直接激活搜索
- 从书签列表点击搜索图标

**成功标准：** 在2秒内返回语义相关的搜索结果，准确率达到80%以上

#### 流程图

```mermaid
graph TD
    A[用户输入搜索查询] --> B[实时输入检测]
    B --> C{输入长度>2?}
    C -->|否| D[显示搜索提示]
    C -->|是| E[300ms防抖延迟]
    
    E --> F[查询预处理]
    F --> G[生成查询向量]
    G --> H[向量相似度计算]
    
    H --> I[结果排序和过滤]
    I --> J{找到相关结果?}
    
    J -->|是| K[显示搜索结果]
    J -->|否| L[显示无结果页面]
    
    K --> M[用户选择结果]
    M --> N{执行什么操作?}
    N -->|点击访问| O[新标签页打开]
    N -->|编辑操作| P[显示编辑界面]
    N -->|删除操作| Q[确认删除]
    
    L --> R[显示搜索建议]
    R --> S[用户调整查询]
    S --> A
```

#### 边缘情况和错误处理：
- **AI模型加载失败：** 自动降级为关键词搜索模式
- **搜索超时：** 显示部分结果和超时提示，允许用户重试
- **空查询结果：** 提供智能搜索建议和最近浏览记录
- **拼写错误：** 自动纠错并显示"你是否想搜索..."提示

## 线框图与原型

### 设计文件位置

**主要设计文件：** 建议使用 Figma 创建详细的视觉设计文件

### 核心界面布局

#### 扩展弹窗主界面 (320px × 500px)

**功能目的：** 作为用户与BMad Link交互的主要入口，优先展示搜索功能

**关键元素：**
- 居中的搜索框 (占据界面60%宽度)
- AI状态指示器 (搜索框右侧)
- Tab导航栏 (搜索/浏览/设置)
- 实时搜索结果列表 (可滚动区域)

**交互说明：**
- 默认焦点自动定位到搜索框
- 支持键盘导航 (Tab切换, Enter确认, Esc关闭)
- 搜索结果支持鼠标悬停预览和键盘选择

```
┌─────────────────────────────────────┐
│  🔍 BMad Link          [⚙️]         │
├─────────────────────────────────────┤
│  [搜索] [浏览] [设置]                │
├─────────────────────────────────────┤
│  ┌─────────────────────────────┐  🤖 │
│  │ 搜索你的技术书签...          │  ●  │
│  └─────────────────────────────┘     │
├─────────────────────────────────────┤
│  📄 React State Management          │
│  🔗 github.com/reduxjs/toolkit      │
│  ⭐ 相似度: 95%                      │
├─────────────────────────────────────┤
│  📚 CSS Grid Layout Guide            │
│  🔗 developer.mozilla.org/docs      │  
│  ⭐ 相似度: 87%                      │
├─────────────────────────────────────┤
│  ⚡ Performance Optimization         │
│  🔗 web.dev/performance            │
│  ⭐ 相似度: 82%                     │
└─────────────────────────────────────┘
```

#### 搜索结果详情卡片

**功能目的：** 提供书签的详细信息和快捷操作，支持快速决策

**关键元素：**
- 网站缩略图或图标
- 标题和URL信息
- AI生成的内容摘要
- 快捷操作按钮 (访问/编辑/删除)

```
┌─────────────────────────────────────────────┐
│  [📸]  TypeScript Handbook               [⋮] │
│        https://typescript.org/docs           │
│                                             │
│  📋 TypeScript官方文档，包含完整的语法指南    │
│     和最佳实践。涵盖类型系统、接口、泛型等   │
│     高级特性。                              │
│                                             │
│  🏷️ 标签: typescript, documentation         │
│  📅 收藏时间: 2025-09-01                    │
│  👆 最近访问: 2天前                         │
│                                             │
│  [🔗 访问] [✏️ 编辑] [🗑️ 删除]             │
└─────────────────────────────────────────────┘
```

#### 书签管理界面

**功能目的：** 提供传统的列表视图，支持批量管理和高级筛选

```
┌─────────────────────────────────────────────┐
│  排序: [时间↓] 筛选: [全部类型▼] [🔍]        │
├─────────────────────────────────────────────┤
│ ☑️ [📄] React Docs            2天前   [⋮]   │
│ ☑️ [🐙] awesome-react         3天前   [⋮]   │  
│ ☐  [📚] CSS Tricks            1周前   [⋮]   │
│ ☐  [⚡] Webpack Guide          2周前   [⋮]   │
│ ☐  [🎨] Design Systems        1月前   [⋮]   │
├─────────────────────────────────────────────┤
│ 已选中 2 项  [批量删除] [导出] [标签编辑]    │
└─────────────────────────────────────────────┘
```

## 组件库/设计系统

### 设计系统方法

**设计系统方法：** 创建轻量级的定制设计系统，借鉴VS Code和GitHub的设计语言

**理由选择：**
- 避免引入Material Design或其他重型框架，控制扩展体积和加载性能
- 参考开发者熟悉工具的视觉语言，减少学习成本
- 确保组件的高度定制性，支持AI功能的特殊交互需求

### 核心组件定义

#### 搜索输入组件 (SearchInput)

**功能目的：** BMad Link的核心交互组件，支持智能搜索和实时建议

**变体类型：**
- `default` - 标准搜索框，包含搜索图标和placeholder
- `with-ai-indicator` - 带AI状态指示器的增强版本
- `compact` - 紧凑模式，用于设置面板

**状态定义：**
- `idle` - 默认状态，显示placeholder提示
- `typing` - 用户输入时的激活状态
- `searching` - AI处理中，显示loading动画
- `results-shown` - 显示搜索结果时的状态
- `error` - 搜索失败或AI不可用时的错误状态

#### 书签卡片组件 (BookmarkCard)

**功能目的：** 统一的书签信息展示容器，支持多种显示密度

**变体类型：**
- `detailed` - 详细视图，包含缩略图、描述和操作按钮
- `compact` - 紧凑视图，仅显示核心信息
- `list-item` - 列表模式，水平布局适合批量管理

**状态定义：**
- `default` - 标准显示状态
- `hovered` - 鼠标悬停，显示操作按钮
- `selected` - 键盘导航或批量选择时的选中状态
- `loading` - 内容加载中，显示骨架屏
- `error` - 加载失败，显示重试选项

#### AI状态指示器 (AIStatusIndicator)

**功能目的：** 专门为AI功能设计的状态传达组件

**变体类型：**
- `dot` - 简单的圆点指示器，用于紧凑空间
- `with-label` - 包含文字说明的完整指示器
- `progress` - 带进度条的处理状态显示

**状态定义：**
- `ready` - AI模型就绪，绿色指示
- `processing` - 正在处理，黄色脉冲动画
- `offline` - AI功能不可用，灰色静态
- `error` - AI处理错误，红色警示

#### 快捷操作菜单 (QuickActionMenu)

**功能目的：** 上下文相关的操作菜单，支持键盘和鼠标操作

**变体类型：**
- `context-menu` - 右键触发的上下文菜单
- `dropdown` - 点击触发的下拉操作菜单
- `inline-actions` - 内联显示的快捷按钮组

**状态定义：**
- `hidden` - 默认隐藏状态
- `visible` - 显示状态，支持动画过渡
- `navigating` - 键盘导航模式，高亮当前选项

## 品牌与风格指南

### 视觉识别

**设计理念：** 融合开发者工具的专业感与AI技术的智能感，打造"聪明而不炫耀"的视觉体验。参考VS Code、GitHub Desktop等开发者熟悉工具的设计语言，同时注入AI产品的现代感。

### 色彩体系

| 色彩类型 | 色值 | 使用场景 |
|----------|------|----------|
| Primary | `#0366d6` | 主要操作按钮、链接、选中状态 |
| Secondary | `#586069` | 次要文本、图标、分割线 |
| Accent | `#28a745` | 成功状态、AI就绪指示、确认操作 |
| Success | `#28a745` | 收藏成功、操作完成反馈 |
| Warning | `#ffd33d` | AI处理中、需要注意的状态 |
| Error | `#d73a49` | 错误提示、删除确认、失败状态 |
| Neutral | `#24292e, #586069, #f6f8fa` | 背景色、边框、文本层级 |

### 字体系统

#### 字体族

- **主要字体：** `'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif`
- **次要字体：** `'Inter', 'Helvetica Neue', Arial, sans-serif`
- **等宽字体：** `'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, monospace`

#### 字体比例

| 元素 | 字号 | 字重 | 行高 |
|------|------|------|------|
| H1 | `20px` | `600 (Semibold)` | `1.2` |
| H2 | `16px` | `600 (Semibold)` | `1.3` |
| H3 | `14px` | `500 (Medium)` | `1.4` |
| Body | `13px` | `400 (Regular)` | `1.5` |
| Small | `11px` | `400 (Regular)` | `1.4` |

### 图标系统

**图标库：** Feather Icons + 自定义AI相关图标

**使用指南：**
- **通用图标：** 使用Feather Icons的简洁线性风格，2px描边粗细
- **AI专属图标：** 定制设计"智能大脑"、"语义匹配"等概念图标
- **文件类型图标：** 使用简化的文档、代码、链接等识别图标

### 间距与布局

**网格系统：** 8px基础网格，支持4px的半网格单位

**间距比例：** 
- **xs:** 4px - 组件内部小间距
- **sm:** 8px - 相关元素间距
- **md:** 16px - 组件间标准间距  
- **lg:** 24px - 区块间距
- **xl:** 32px - 页面级大间距

## 可访问性要求

### 合规目标

**标准：** WCAG 2.1 AA级别合规

### 核心无障碍要求

#### 视觉无障碍

**色彩对比度：**
- 正文文本对比度 ≥ 4.5:1 (`#ffffff` on `#24292e` = 15.8:1 ✓)
- 大文本对比度 ≥ 3:1 (`#586069` on `#24292e` = 4.2:1 ✓)
- 交互元素对比度 ≥ 3:1 (按钮、链接、表单控件)

**焦点指示器：**
- 所有可交互元素必须有明显的焦点指示器
- 焦点环颜色：`#0366d6` 2px solid outline
- 焦点环不被界面元素遮挡，offset: 2px

**文本缩放支持：**
- 支持浏览器文本缩放至200%而不影响功能
- 使用相对单位(rem/em)而非固定像素值

#### 交互无障碍

**键盘导航：**
- Tab键顺序遵循逻辑阅读顺序 (搜索框 → 结果 → 操作按钮)
- Enter键激活按钮和链接
- Escape键关闭弹窗和菜单
- 方向键在搜索结果间导航

**屏幕阅读器支持：**
- 所有图像和图标提供alt文本或aria-label
- 搜索结果数量的实时播报：`"找到12个相关书签"`
- AI处理状态的语音反馈：`"正在分析书签内容..."`
- 表单控件关联明确的label

**触摸目标规范：**
- 最小点击目标：44px × 44px (WCAG AAA推荐)
- 相邻按钮间距 ≥ 8px 避免误触

### 测试策略

**自动化测试：**
- 集成axe-core进行持续无障碍性测试
- 每次构建自动检查色彩对比度和语义结构
- 键盘导航路径的自动化测试脚本

**手动测试清单：**
1. ✅ 纯键盘操作完成所有核心功能
2. ✅ 屏幕阅读器(NVDA/JAWS)正确播报所有内容
3. ✅ 200%文本缩放下界面仍可用
4. ✅ 高对比度模式下视觉元素清晰可见
5. ✅ AI状态变化能被辅助技术识别

## 响应式策略

### 断点定义

| 断点名称 | 最小宽度 | 最大宽度 | 目标设备 |
|----------|----------|----------|----------|
| Mobile | `320px` | `767px` | 手机浏览器(备用支持) |
| Tablet | `768px` | `1023px` | 平板设备(基础支持) |  
| Desktop | `1024px` | `1919px` | 标准桌面显示器(主要目标) |
| Wide | `1920px` | `-` | 高分辨率显示器(优化支持) |

### 适配模式

#### 布局变化

**Chrome扩展弹窗适配：**
- **标准模式(320×500px)：** 默认Chrome扩展弹窗尺寸，紧凑布局
- **宽屏模式(400×600px)：** 大屏幕下的舒适查看模式(用户可选)
- **全屏模式：** 独立标签页模式，提供完整的书签管理界面

#### 导航变化

**Tab导航适配：**
- **移动端：** 底部Tab栏，图标为主，文字最小化
- **桌面端：** 顶部Tab栏，图标+文字，完整标签显示
- **超宽屏：** 侧边栏导航，折叠式菜单，高效的垂直空间利用

#### 内容优先级

**移动端内容优化：**
- **隐藏元素：** AI相似度评分、详细描述、次要操作按钮
- **简化显示：** 仅显示标题、域名、主要操作(访问/删除)

**桌面端内容完整：**
- **显示全部：** 完整的书签信息、AI分析结果、所有操作选项
- **悬停增强：** 鼠标悬停显示更多详情、快捷操作提示

## 动画与微交互

### 动效设计原则

**功能性优先：** 每个动画都必须服务于用户理解或操作效率，避免纯装饰性动效

**性能考量：** 所有动画使用CSS3 transform和opacity，避免触发重排重绘

**可控性：** 尊重用户的`prefers-reduced-motion`设置，提供完整的动画禁用选项

### 核心动画定义

#### AI搜索状态动画

**动画名称：AI语义分析指示器**
**描述：** 搜索框旁边的AI状态图标，通过脉冲动画传达处理进度
**持续时间：** 1.2s循环 
**缓动函数：** ease-in-out

#### 搜索结果出现动画  

**动画名称：渐进式结果展示**
**描述：** 搜索结果按相似度排序依次出现，创造"智能筛选"的视觉效果
**持续时间：** 每项150ms，错开50ms延迟
**缓动函数：** cubic-bezier(0.25, 0.46, 0.45, 0.94)

#### 书签卡片悬停交互

**动画名称：智能悬停预览**
**描述：** 鼠标悬停书签时，卡片轻微上升并显示操作按钮
**持续时间：** 200ms
**缓动函数：** ease-out

**视觉变化：**
- 卡片阴影增强：`box-shadow: 0 4px 12px rgba(0,0,0,0.15)`
- 轻微上升：`transform: translateY(-2px)`
- 操作按钮淡入：`opacity: 0 → 1`

#### 收藏成功反馈

**动画名称：成功确认脉冲**
**描述：** 收藏按钮变为绿色对勾，伴随轻微的脉冲效果
**持续时间：** 600ms 
**缓动函数：** ease-in-out

#### 删除确认交互

**动画名称：危险操作警示**
**描述：** 删除按钮悬停时的红色警示和确认流程的动画
**持续时间：** 250ms
**缓动函数：** ease-out

## 性能考虑

### 性能目标

**页面加载性能：**
- **扩展启动时间：** ≤ 800ms (从点击图标到界面可用)
- **首次交互延迟：** ≤ 200ms (搜索框获得焦点的时间)
- **AI模型加载：** ≤ 3秒 (TensorFlow.js模型初始化完成)

**交互响应性能：**
- **搜索响应时间：** ≤ 2秒 (从输入完成到结果显示)
- **界面切换延迟：** ≤ 150ms (Tab切换、弹窗状态变化)
- **动画帧率：** ≥ 60fps (所有CSS动画和滚动操作)

**资源占用限制：**
- **内存使用峰值：** ≤ 50MB (包含AI模型和用户数据)
- **IndexedDB查询：** ≤ 500ms (1000个书签的语义搜索)
- **网络请求：** 0个 (完全离线运行，除模型下载)

### 设计级性能策略

#### 界面渲染优化

**虚拟化列表实现：**
- 搜索结果和书签列表使用虚拟滚动，仅渲染可视区域+缓冲区的20个项目
- 动态高度计算，支持不同内容长度的书签卡片
- 滚动时的平滑插值，避免闪烁和跳跃

**CSS性能最佳实践：**
- 所有动画使用`transform`和`opacity`，避免触发重排
- 使用`will-change`属性预告GPU加速的元素
- 避免复杂的CSS选择器，优先使用类选择器

#### 数据处理优化

**AI向量计算策略：**
- 使用Web Worker进行向量计算，避免阻塞主线程
- 实现增量式相似度计算，优先计算最近访问的书签
- 向量数据使用Float32Array存储，减少内存占用

**IndexedDB查询优化：**
- 建立复合索引：`[timestamp, similarity_score, content_type]`
- 使用游标(cursor)进行大量数据的分页查询
- 实现查询结果缓存，相同查询直接返回缓存数据

**内存管理策略：**
- 搜索结果超过100个时自动分页显示
- 图片和缩略图使用懒加载，离开视口自动释放
- 定期清理未使用的AI模型缓存和计算结果

#### AI功能性能优化

**模型加载策略：**
- TensorFlow.js模型分片加载，优先加载核心推理部分
- 使用IndexedDB缓存已下载的模型文件
- 首次使用时显示下载进度，后续启动直接从缓存加载

**搜索算法优化：**
- 实现多级相似度筛选：粗糙筛选(余弦相似度) + 精细排序(语义权重)
- 使用近似最近邻(ANN)算法，牺牲精度换取速度
- 搜索结果限制在前50个，避免过多计算

### 性能监控与降级

**自动降级机制：**
- AI模型加载失败 → 自动降级为关键词搜索
- 内存使用超过45MB → 清理缓存并限制搜索结果数量
- 搜索耗时超过3秒 → 显示部分结果并提供"更多结果"按钮

## 下一步

### 即时行动项

1. **与利益相关者评审UX规格** - 确保设计方向符合产品愿景和技术可行性
2. **创建详细的Figma设计文件** - 基于线框图和组件规范，制作高保真视觉设计
3. **验证Chrome扩展技术限制** - 确认响应式设计和性能目标的技术可行性
4. **准备设计移交文档** - 整理设计素材和规范，为架构师提供完整的技术输入
5. **建立设计系统资源库** - 创建可复用的组件库和设计token文件

### 设计移交清单

- [✅] 所有用户流程已完整文档化
- [✅] 组件清单完成，包含状态定义和使用指南
- [✅] 无障碍要求明确，符合WCAG AA标准
- [✅] 响应式策略清晰，适配多种屏幕尺寸
- [✅] 品牌指南完善，色彩和字体体系完整
- [✅] 性能目标确定，优化策略具体可行

---

## 文档完成总结

**BMad Link UI/UX规格说明** 现已完成，涵盖了从用户体验目标到具体实现细节的完整设计规范。

**核心设计理念：**
- **搜索优先：** 界面围绕AI语义搜索设计，突出产品核心价值
- **开发者导向：** 深色主题、键盘导航、高效交互符合目标用户习惯  
- **智能透明：** AI处理过程可感知，技术优势转化为用户体验优势
- **性能至上：** 严格的性能标准确保Chrome扩展的流畅运行

这份规格说明为后续的视觉设计和前端开发提供了坚实的基础，确保BMad Link能够实现"零维护的智能书签管理"的产品愿景。