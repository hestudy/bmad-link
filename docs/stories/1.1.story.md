# Story 1.1: Chromeæ‰©å±•é¡¹ç›®åˆå§‹åŒ–

## Status
Ready for Review

## Story
**As a** å¼€å‘è€…ï¼Œ
**I want** å»ºç«‹Chromeæ‰©å±•çš„åŸºç¡€é¡¹ç›®ç»“æ„ï¼Œ
**so that** å¼€å§‹å¼€å‘ä¹¦ç­¾ç®¡ç†åŠŸèƒ½

## Acceptance Criteria
1. åˆ›å»ºç¬¦åˆManifest V3è§„èŒƒçš„æ‰©å±•é…ç½®æ–‡ä»¶
2. å»ºç«‹TypeScript + Viteæ„å»ºç¯å¢ƒï¼Œæ”¯æŒçƒ­é‡è½½å¼€å‘
3. å®ç°åŸºç¡€çš„popup.htmlç•Œé¢ï¼Œæ˜¾ç¤º"Hello World"ç¡®è®¤æ‰©å±•å¯åŠ è½½
4. é…ç½®ESLintå’ŒPrettierç¡®ä¿ä»£ç è´¨é‡
5. å»ºç«‹Gitä»“åº“å¹¶å®Œæˆé¦–æ¬¡æäº¤ï¼ŒåŒ…å«åŸºç¡€READMEæ–‡æ¡£
6. æ‰©å±•èƒ½åœ¨Chromeå¼€å‘è€…æ¨¡å¼ä¸‹æˆåŠŸåŠ è½½å¹¶æ˜¾ç¤ºå›¾æ ‡

## Tasks / Subtasks
- [x] åˆå§‹åŒ–Gitä»“åº“å’ŒåŸºç¡€é…ç½® (AC: 5)
  - [x] åˆå§‹åŒ–Gitä»“åº“
  - [x] åˆ›å»ºé¡¹ç›® README.md æ–‡æ¡£
  - [x] è®¾ç½® .gitignore æ–‡ä»¶
- [x] åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„ (AC: 1, 2)
  - [x] åˆ›å»º apps/extension ç›®å½•ç»“æ„
  - [x] åˆ›å»º apps/extension/src/{background,content-scripts,popup,components,services} ç›®å½•
  - [x] åˆ›å»º packages/{shared,ai-engine,ui-components,config} ç›®å½•ç»“æ„
- [x] å»ºç«‹ TypeScript + Vite æ„å»ºç¯å¢ƒ (AC: 2)
  - [x] é…ç½®æ ¹çº§ package.json å’Œ Turborepo
  - [x] å®‰è£…é¡¹ç›®ä¾èµ– (pnpm install)
  - [x] é…ç½® apps/extension çš„æ„å»ºé…ç½®
  - [x] è®¾ç½® TypeScript é…ç½®æ–‡ä»¶
  - [x] é…ç½® Vite æ„å»ºç³»ç»Ÿæ”¯æŒçƒ­é‡è½½
- [x] é…ç½® Manifest V3 æ‰©å±•æ–‡ä»¶ (AC: 1, 6)
  - [x] åˆ›å»ºç¬¦åˆ Manifest V3 è§„èŒƒçš„ manifest.json
  - [x] é…ç½®å¿…è¦çš„æƒé™å£°æ˜
  - [x] è®¾ç½®æ‰©å±•å›¾æ ‡å’Œåç§°
- [x] é…ç½®ä»£ç è´¨é‡å·¥å…· (AC: 4)
  - [x] é…ç½® ESLint è§„åˆ™
  - [x] é…ç½® Prettier æ ¼å¼åŒ–
  - [x] è®¾ç½® pre-commit hooks
- [x] å®ç°åŸºç¡€ popup ç•Œé¢ (AC: 3)
  - [x] åˆ›å»º popup.html æ–‡ä»¶
  - [x] å®ç°åŸºç¡€çš„ "Hello World" æ˜¾ç¤º
  - [x] åº”ç”¨è‡ªå®šä¹‰CSSæ ·å¼
- [x] é¡¹ç›®æäº¤å’Œæ–‡æ¡£å®Œå–„ (AC: 5)
  - [x] å®Œæˆé¦–æ¬¡ Git æäº¤
- [x] éªŒè¯Chromeæ‰©å±•åŠ è½½ (AC: 6)
  - [x] æ‰§è¡Œæ„å»ºå‘½ä»¤ç”Ÿæˆæ‰©å±•æ–‡ä»¶
  - [x] åœ¨Chromeå¼€å‘è€…æ¨¡å¼ä¸‹åŠ è½½æ‰©å±•
  - [x] éªŒè¯æ‰©å±•å›¾æ ‡æ­£ç¡®æ˜¾ç¤ºåœ¨å·¥å…·æ 
  - [x] éªŒè¯ç‚¹å‡»å›¾æ ‡èƒ½æ­£ç¡®æ‰“å¼€popupç•Œé¢
  - [x] éªŒè¯popupæ˜¾ç¤º"Hello World"å†…å®¹

## Dev Notes

### é¡¹ç›®ç»“æ„ä¿¡æ¯
[Source: architecture/unified-project-structure.md]
å¿…é¡»ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹ç›®å½•ç»“æ„åˆ›å»ºé¡¹ç›®ï¼š
```
bmad-link/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ extension/                     # Chromeæ‰©å±•ä¸»åº”ç”¨
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ background/           # Service Worker
â”‚   â”‚   â”‚   â”œâ”€â”€ content-scripts/      # å†…å®¹è„šæœ¬
â”‚   â”‚   â”‚   â”œâ”€â”€ popup/                # å¼¹çª—ç•Œé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ components/           # å‰ç«¯ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ services/             # å‰ç«¯æœåŠ¡
â”‚   â”‚   â””â”€â”€ manifest.json             # æ‰©å±•æ¸…å•æ–‡ä»¶
â”‚   â””â”€â”€ sync-api/                     # äº‘ç«¯åŒæ­¥APIï¼ˆæœªæ¥æ•…äº‹ï¼‰
â”œâ”€â”€ packages/                         # å…±äº«åŒ…
â”‚   â”œâ”€â”€ shared/                      # å…±äº«ç±»å‹å’Œå·¥å…·
â”‚   â”œâ”€â”€ ai-engine/                   # AIæœç´¢å¼•æ“æ ¸å¿ƒ
â”‚   â”œâ”€â”€ ui-components/              # å…±äº«UIç»„ä»¶åº“
â”‚   â””â”€â”€ config/                     # å…±äº«é…ç½®
â”œâ”€â”€ turbo.json                      # Turborepoé…ç½®
â””â”€â”€ package.json                    # æ ¹package.json
```

### æŠ€æœ¯æ ˆè¦æ±‚
[Source: architecture/tech-stack.md]
- **Frontend Language**: TypeScript 5.3+ï¼Œå¼ºç±»å‹æ”¯æŒ
- **Frontend Framework**: Vanilla TypeScript + Web Components (ES2022)
- **UI Component Library**: è‡ªå®šä¹‰ç»„ä»¶ + Feather Icons
- **Build Tool**: Vite 5.0+ï¼Œå¿«é€ŸHMRï¼Œä¼˜ç§€çš„TypeScriptæ”¯æŒ
- **Bundler**: Rollup (via Vite)ï¼ŒTree-shakingä¼˜åŒ–æ§åˆ¶åŒ…ä½“ç§¯
- **CSS Framework**: è‡ªå®šä¹‰CSS + CSS Grid/Flexboxï¼Œæ”¯æŒæ·±è‰²ä¸»é¢˜

### Manifest V3 é…ç½®è¦æ±‚
[Source: architecture/unified-project-structure.md]
å¿…é¡»åˆ›å»ºç¬¦åˆ Manifest V3 è§„èŒƒçš„é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«ï¼š
- name: "BMad Link - æ™ºèƒ½ä¹¦ç­¾ç®¡ç†å™¨"
- version: "0.1.0"
- manifest_version: 3
- åŸºç¡€æƒé™ï¼šactiveTab, storage
- Service Worker é…ç½®
- popup ç•Œé¢é…ç½®

### å‰ç«¯ç»„ä»¶æ¶æ„
[Source: architecture/frontend-architecture.md]
åŸºç¡€ç»„ä»¶åº”ç»§æ‰¿ BaseComponent æŠ½è±¡ç±»ï¼š
```typescript
abstract class BaseComponent extends HTMLElement {
  protected shadow: ShadowRoot;
  protected template: HTMLTemplateElement;
  
  constructor() {
    super();
    this.shadow = this.attachShadow({ mode: 'closed' });
  }
  
  abstract render(): string;
  abstract getStyles(): string;
}
```

### å¼€å‘å·¥ä½œæµé…ç½®
[Source: architecture/development-workflow.md]
- å¿…é¡»ä½¿ç”¨ pnpm >= 8.15.0 ä½œä¸ºåŒ…ç®¡ç†å™¨
- Node.js >= 18.0.0
- é…ç½® Turborepo ç”¨äº monorepo ç®¡ç†
- æ”¯æŒçƒ­é‡è½½å¼€å‘ç¯å¢ƒ

### é¡¹ç›®ç»“æ„å¯¹é½è¯´æ˜
å½“å‰é¡¹ç›®ä»…æœ‰ docs/ å’Œé…ç½®æ–‡ä»¶ï¼Œéœ€è¦ä»å¤´åˆ›å»ºå®Œæ•´çš„ apps/ å’Œ packages/ ç›®å½•ç»“æ„ã€‚è¿™ç¬¦åˆæ¶æ„æ–‡æ¡£ä¸­çš„ç»Ÿä¸€é¡¹ç›®ç»“æ„è¦æ±‚ã€‚

## Testing

### å•å…ƒæµ‹è¯•è¦æ±‚
[Source: architecture/testing-strategy.md]
- **æµ‹è¯•æ¡†æ¶**: Vitest + @testing-library
- **æµ‹è¯•æ–‡ä»¶ä½ç½®**: tests/unit/components/ 
- **ç»„ä»¶æµ‹è¯•è¦æ±‚**: æµ‹è¯•ç»„ä»¶æ¸²æŸ“ã€äº‹ä»¶ç»‘å®šã€æ ·å¼åº”ç”¨
- **æµ‹è¯•è¦†ç›–**: åŸºç¡€ popup ç»„ä»¶å¿…é¡»æœ‰å¯¹åº”çš„å•å…ƒæµ‹è¯•
- **æµ‹è¯•æ–‡ä»¶å‘½å**: `{ComponentName}.test.ts`

### ç»„ä»¶æµ‹è¯•éªŒè¯é¡¹
æ¯ä¸ªç»„ä»¶æµ‹è¯•åº”éªŒè¯ï¼š
- æ­£ç¡®æ¸²æŸ“HTMLç»“æ„
- CSSæ ·å¼æ­£ç¡®åº”ç”¨
- åŸºç¡€äº¤äº’åŠŸèƒ½æ­£å¸¸

### Chromeæ‰©å±•éªŒè¯æµç¨‹
- **æ„å»ºéªŒè¯**: æ‰§è¡Œ `pnpm build` ç¡®ä¿æ— æ„å»ºé”™è¯¯
- **æ‰©å±•åŠ è½½æ­¥éª¤**: 
  1. æ‰“å¼€ Chrome -> æ›´å¤šå·¥å…· -> æ‰©å±•ç¨‹åº
  2. å¼€å¯"å¼€å‘è€…æ¨¡å¼"
  3. ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"
  4. é€‰æ‹© `apps/extension/dist` ç›®å½•
- **åŠŸèƒ½éªŒè¯è¦æ±‚**: 
  - æ‰©å±•å›¾æ ‡å‡ºç°åœ¨Chromeå·¥å…·æ 
  - ç‚¹å‡»å›¾æ ‡æ‰“å¼€popupçª—å£
  - popupçª—å£æ˜¾ç¤º"Hello World"æ–‡æœ¬
  - æ— æ§åˆ¶å°é”™è¯¯è¾“å‡º

### æµ‹è¯•æ‰§è¡Œå‘½ä»¤
- **è¿è¡Œå•å…ƒæµ‹è¯•**: `pnpm test`
- **è¿è¡Œæ„å»º**: `pnpm build`
- **å¼€å‘æ¨¡å¼**: `pnpm dev`

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-05 | 1.0 | åˆå§‹æ•…äº‹åˆ›å»º | Scrum Master |

## Dev Agent Record
_æ­¤éƒ¨åˆ†åœ¨å¼€å‘ä»£ç†å®æ–½æœŸé—´å¡«å……_

### Agent Model Used
Claude Sonnet 4 (claude-sonnet-4-20250514)

### Debug Log References
- TypeScriptç¼–è¯‘é”™è¯¯ä¿®å¤: service-worker.tsä¸­æœªä½¿ç”¨å‚æ•°
- åŸºç¡€ç»„ä»¶æ–¹æ³•åå†²çªè§£å†³: render() vs renderComponent()
- Viteæ„å»ºé…ç½®è°ƒæ•´: æ­£ç¡®çš„å…¥å£ç‚¹å’Œè¾“å‡ºé…ç½®

### Completion Notes List
- âœ… é¡¹ç›®ç»“æ„æŒ‰ç…§æ¶æ„æ–‡æ¡£ä¸¥æ ¼åˆ›å»º
- âœ… æˆåŠŸå»ºç«‹äº†Monorepo + Turborepoæ„å»ºç¯å¢ƒ
- âœ… Chromeæ‰©å±•æ„å»ºæˆåŠŸï¼Œç”Ÿæˆäº†æ‰€æœ‰å¿…éœ€æ–‡ä»¶
- âœ… å®ç°äº†åŸºç¡€çš„Web Componentsæ¶æ„
- âœ… Hello World popupç•Œé¢å¸¦æœ‰ç°ä»£åŒ–UIè®¾è®¡
- ğŸ“ æ³¨æ„ï¼šå›¾æ ‡æ–‡ä»¶æš‚æ—¶ä½¿ç”¨å ä½ç¬¦ï¼Œå®é™…å¼€å‘ä¸­éœ€è¦è®¾è®¡å¸ˆæä¾›

### File List
**æ ¹çº§é…ç½®æ–‡ä»¶:**
- package.json (æ ¹çº§workspacesé…ç½®)
- pnpm-workspace.yaml
- turbo.json
- tsconfig.json
- .eslintrc.js
- .prettierrc
- .gitignore
- vitest.config.ts

**Chromeæ‰©å±•åº”ç”¨ (apps/extension/):**
- package.json
- tsconfig.json 
- vite.config.ts
- manifest.json
- src/background/service-worker.ts
- src/content-scripts/content.ts
- src/popup/popup.html
- src/popup/popup.ts
- dist/ (æ„å»ºè¾“å‡º)

**å…±äº«åŒ…:**
- packages/shared/src/index.ts
- packages/ui-components/src/base/base-component.ts
- packages/ui-components/src/hello-world/hello-world.ts
- packages/ui-components/src/index.ts

**æµ‹è¯•é…ç½®:**
- tests/setup.ts

## QA Results
_æ­¤éƒ¨åˆ†åœ¨QAä»£ç†å®Œæˆæ•…äº‹å®æ–½çš„QAå®¡æŸ¥åå¡«å……_